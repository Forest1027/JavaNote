# QC for Lucene
## 什么是全文检索？为什么使用全文检索？
1. 前情
	1. 数据分为结构化数据、非结构化数据
	2. 结构化数据：有固定长度、有限长度。**结构化数据的搜索比较容易**(eg:数据库、元数据等)
	3. 非结构化数据：不定长、无固定格式的数据。**查询难**(eg:邮件、网页、磁盘上的文件等)
	4. 非结构化数据难以查询，但是对于查询这类数据的需求要十分大，因此需要找到查询这种数据的办法
2. 非结构化数据查询方法
	1. 顺序扫描法 Serial Scanning
		1. 一个一个文档看，速度相当慢
	2. 全文检索 Full-text Search
		1. 将非结构化数据中的一部分提取出来，重新组织，使其变得有一定结构
		2. 再对这有结构的数据进行搜索
		3. 这部分重组后变得有结构的数据叫做**索引**
		4. 先创建索引，再对索引进行搜索的过程就叫**全文检索**

>注意：全文检索创建索引的过程比较费时间，但是一旦索引创建完毕，可以多次使用。因此，是很值得的。这是典型的**以空间换时间、以时间换时间**的优化方法

3. 应用场景
	1. 对于数据量大、数据结构不固定的数据可采用全文检索方式
	2. 百度、google、论坛站内搜索等

## 如何实现全文检索
1. 流程图
	1. 索引流程
		1. 创建索引
			1. 获得原始文档（见下方的“信息采集”）
			2. 创建文档对象：将原始文档创建成文档对象。文档中包括域、域中存储对象
			3. 分析文档
				1. 使文档对象中包含域，需要对原始文档进行分析
				2. 如提取单词、字母转小写、去标点符号、去除停用词
				3. 提取过后的结果叫做term。term包括两部分，文档的域名和词的内容
			4. 创建索引
				1. 倒排索引结构，实现通过词汇找文档。
				2. 传统的方法是顺序扫描方法，通过文档找词汇。数据量大、搜索慢。
	2. 搜索流程/查询索引
		1. 用户查询接口
			1. Lucene不提供用户搜索界面，需自己实现
			2. 用户输入搜索关键字查询
		2. 创建查询对象
		3. 执行查询
		4. 渲染结果：高亮结果等
2. 信息采集
	1. what
		1. 从互联网(爬虫)、数据库(jdbc)、文件系统(IO)获取需要搜索的原始信息
	2. how
		1. Lucene不提供信息采集的类库，需要自己写爬虫
		2. 可利用以下开源软件实现信息采集
			1. [Nutch](http://lucene.apache.org/nutch), Nutch是apache的一个子项目，包括大规模爬虫工具，能够抓取和分辨web网站数据。
			2. [jsoup](http://jsoup.org/ )，jsoup 是一款Java 的HTML解析器，可直接解析某个URL地址、HTML文本内容。它提供了一套非常省力的API，可通过DOM，CSS以及类似于jQuery的操作方法来取出和操作数据。
			3. [heritrix](http://sourceforge.net/projects/archive-crawler/files/)，Heritrix 是一个由 java 开发的、开源的网络爬虫，用户可以使用它来从网上抓取想要的资源。其最出色之处在于它良好的可扩展性，方便用户实现自己的抓取逻辑。
